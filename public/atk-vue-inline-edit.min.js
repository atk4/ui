(self.webpackChunkatk=self.webpackChunkatk||[]).push([[477],{4126:(t,i,n)=>{"use strict";n.r(i),n.d(i,{default:()=>r});var s=n(3609),e=n.n(s);const r={name:"atk-inline-edit",template:'\n      <div :class="[options.inputCss, hasError ? \'error\' : \'\' ]">\n            <input\n            :class="options.inlineCss"\n            :name="options.fieldName"\n            :type="options.fieldType"\n            v-model="value"\n            @keyup="onKeyup"\n            @focus="onFocus"\n            @blur="onBlur"/><i class="icon"></i>\n      </div>',props:{url:String,initValue:String,saveOnBlur:{type:Boolean,default:!0},options:{type:Object,default:()=>({inputCss:"",inlineCss:"",fieldName:null,fieldType:"text"})}},data:function(){return{value:this.initValue,temp:this.initValue,hasError:!1}},computed:{isDirty:function(){return this.temp!==this.value}},methods:{onFocus:function(){this.hasError?this.clearError():this.temp=this.value},onKeyup:function(t){const i=t.keyCode;this.clearError(),13===i?this.onEnter(t):27===i&&this.onEscape()},onBlur:function(){this.isDirty&&this.saveOnBlur&&!this.hasError?this.update():this.value=this.temp},onEscape:function(){this.value=this.temp,this.$el.querySelector("input").blur()},onEnter:function(t){this.isDirty&&this.update()},clearError:function(){this.hasError=!1},flashError:function(t=4){0!==t?(this.hasError=!this.hasError,setTimeout((()=>{this.flashError(t-1)}),300)):this.hasError=!1},update:function(){const t=this;e()(this.$el).api({on:"now",url:this.url,data:{value:this.value},method:"POST",onComplete:function(i,n){i.hasValidationError?t.hasError=!0:t.temp=t.value}})}}}}}]);