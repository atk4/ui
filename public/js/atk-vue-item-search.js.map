{"version":3,"file":"js/atk-vue-item-search.js","mappings":"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","sources":["webpack://atk/./src/vue-components/item-search.component.js"],"sourcesContent":["import $ from 'external/jquery';\r\nimport atk from 'atk';\r\n\r\n/**\r\n * Will allow user to send data query request to server.\r\n * Request should filter the data and reload the data view.\r\n * The request is send using Fomantic-UI api.\r\n *\r\n * Properties need for this component are:\r\n * context: string, a jQuery selector where the 'loading' class will be apply by Fomantic-UI - default to this component.\r\n * url:     string, the URL to call.\r\n * q:       string, the initial string for the query. Useful if this search is part of the reload.\r\n * reload:  string, an Id selector for jQuery, '#' is append automatically.\r\n */\r\nexport default {\r\n    name: 'AtkItemSearch',\r\n    template: `\r\n        <div class=\"atk-item-search\" :class=\"inputCss\">\r\n            <input\r\n                class=\"ui\"\r\n                v-model=\"query\"\r\n                type=\"text\"\r\n                name=\"atk-vue-search\"\r\n                placeholder=\"Search...\"\r\n                @keyup=\"onKeyup\"\r\n                @keyup.esc=\"onEscape\"\r\n            />\r\n            <i class=\"atk-search-icon\" :class=\"classIcon\" />\r\n            <span style=\"width: 12px; cursor: pointer;\" @click=\"onClear\" />\r\n        </div>`,\r\n    props: {\r\n        context: String,\r\n        url: String,\r\n        q: String,\r\n        reload: String,\r\n        queryArg: String,\r\n        options: Object,\r\n    },\r\n    data: function () {\r\n        return {\r\n            query: this.q,\r\n            temp: this.q,\r\n            isActive: false,\r\n            extraQuery: null,\r\n            inputCss: this.options.inputCss,\r\n        };\r\n    },\r\n    computed: {\r\n        classIcon: function () {\r\n            return {\r\n                'search icon': this.query === null || this.query === '',\r\n                'remove icon': this.query !== null,\r\n            };\r\n        },\r\n    },\r\n    methods: {\r\n        onKeyup: function () {\r\n            if (!this.onKeyup.debouncedFx) {\r\n                this.onKeyup.debouncedFx = atk.createDebouncedFx((e) => {\r\n                    this.onKeyup.debouncedFx = null;\r\n                    if (this.query !== this.temp) {\r\n                        if (this.query === '') {\r\n                            this.query = null;\r\n                        }\r\n                        this.sendQuery();\r\n                        this.temp = this.query;\r\n                    }\r\n                }, this.options.inputTimeOut);\r\n            }\r\n            this.onKeyup.debouncedFx.call(this);\r\n        },\r\n        onEscape: function () {\r\n            if (this.query !== null) {\r\n                this.query = null;\r\n                this.temp = null;\r\n                this.sendQuery();\r\n            }\r\n        },\r\n        onEnter: function () {\r\n            if (this.query !== null) {\r\n                this.query = null;\r\n                this.temp = null;\r\n                this.sendQuery();\r\n            }\r\n        },\r\n        onClear: function () {\r\n            if (this.query) {\r\n                this.query = null;\r\n                this.temp = null;\r\n                this.sendQuery();\r\n            }\r\n        },\r\n        sendQuery: function () {\r\n            const that = this;\r\n            const options = $.extend({}, this.extraQuery, { __atk_reload: this.reload, [this.queryArg]: this.query });\r\n            const $reload = $('#' + this.reload);\r\n            this.isActive = true;\r\n            $reload.api({\r\n                on: 'now',\r\n                url: this.url,\r\n                data: options,\r\n                method: 'GET',\r\n                stateContext: this.context ? $(this.context) : $(this.$el),\r\n                onComplete: function (e, r) {\r\n                    that.isActive = false;\r\n                },\r\n            });\r\n        },\r\n    },\r\n};\r\n"],"names":["$","atk","name","template","props","context","String","url","q","reload","queryArg","options","Object","data","query","temp","isActive","extraQuery","inputCss","computed","classIcon","methods","onKeyup","debouncedFx","createDebouncedFx","e","sendQuery","inputTimeOut","call","onEscape","onEnter","onClear","that","extend","__atk_reload","$reload","api","on","method","stateContext","$el","onComplete","r"],"sourceRoot":""}