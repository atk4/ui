"use strict";(self.webpackChunkatk=self.webpackChunkatk||[]).push([[477],{83078:(t,n,i)=>{i.r(n),i.d(n,{default:()=>e});var s=i(21145),r=i.n(s);const e={name:"atk-inline-edit",template:'\n    <div :class="[options.inputCss, hasError ? \'error\' : \'\' ]">\n        <input\n            :class="options.inlineCss"\n            :name="options.fieldName"\n            :type="options.fieldType"\n            v-model="value"\n            @keyup="onKeyup"\n            @focus="onFocus"\n            @blur="onBlur"\n        />\n        <i class="icon"></i>\n    </div>',props:{url:String,initValue:String,saveOnBlur:Boolean,options:Object},data:function(){return{value:this.initValue,temp:this.initValue,hasError:!1}},computed:{isDirty:function(){return this.temp!==this.value}},methods:{onFocus:function(){this.hasError?this.clearError():this.temp=this.value},onKeyup:function(t){const n=t.keyCode;this.clearError(),13===n?this.onEnter():27===n&&this.onEscape()},onBlur:function(){this.isDirty&&this.saveOnBlur?this.update():this.value=this.temp},onEscape:function(){this.value=this.temp,this.$el.querySelector("input").blur()},onEnter:function(){this.isDirty&&this.update()},clearError:function(){this.hasError=!1},flashError:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;0!==t?(this.hasError=!this.hasError,setTimeout((()=>{this.flashError(t-1)}),300)):this.hasError=!1},update:function(){const t=this;r()(this.$el).api({on:"now",url:this.url,data:{value:this.value},method:"POST",onComplete:function(n,i){n.hasValidationError?t.hasError=!0:t.temp=t.value}})}}}}}]);
//# sourceMappingURL=atk-vue-inline-edit.min.js.map