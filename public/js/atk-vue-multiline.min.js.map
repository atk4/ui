{"version":3,"file":"js/atk-vue-multiline.min.js","mappings":"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","sources":["webpack://atk/./src/vue-components/multiline/multiline-readonly.component.js","webpack://atk/./src/vue-components/multiline/multiline-header.component.js","webpack://atk/./src/vue-components/multiline/multiline.component.js","webpack://atk/./src/vue-components/multiline/multiline-body.component.js","webpack://atk/./src/vue-components/multiline/multiline-row.component.js","webpack://atk/./src/vue-components/multiline/multiline-cell.component.js","webpack://atk/./src/vue-components/multiline/multiline-textarea.component.js","webpack://atk/./src/vue-components/share/atk-date-picker.js","webpack://atk/./src/vue-components/share/atk-lookup.js"],"sourcesContent":["/**\n * Simply display a readonly value.\n */\nexport default {\n    template: '<div>{{readOnlyValue}}</div>',\n    name: 'atk-multiline-readonly',\n    props: ['readOnlyValue'],\n};\n","import atk from 'atk';\n\nexport default {\n    name: 'atk-multiline-header',\n    template: `\n        <sui-table-header>\n            <sui-table-row v-if=\"hasError()\">\n                <sui-table-cell :style=\"{ background: 'none' }\"></sui-table-cell>\n                <sui-table-cell :style=\"{ background: 'none' }\"\n                    state=\"error\"\n                    v-for=\"column in columns\"\n                    v-if=\"column.isVisible\"\n                    :textAlign=\"getTextAlign(column)\"\n                >\n                    <sui-icon v-if=\"getErrorMsg(column)\" name=\"attention\"></sui-icon>\n                    {{getErrorMsg(column)}}\n                </sui-table-cell>\n            </sui-table-row>\n            <sui-table-row v-if=\"hasCaption()\">\n                <sui-table-header-cell :colspan=\"getVisibleColumns()\">{{caption}}</sui-table-header-cell>\n            </sui-table-row>\n            <sui-table-row :verticalAlign=\"'top'\">\n                <sui-table-header-cell :width=1 textAlign=\"center\">\n                    <input ref=\"check\" type=\"checkbox\" @input=\"onToggleDeleteAll\" :checked=\"isChecked\" :indeterminate=\"isIndeterminate\" />\n                </sui-table-header-cell>\n                <sui-table-header-cell\n                    v-for=\"column in columns\"\n                    v-if=\"column.isVisible\"\n                    :width=column.cellProps.width\n                    :textAlign=\"getTextAlign(column)\"\n                >\n                    <div>{{column.caption}}</div>\n                    <div v-if=\"false\" :style=\"{ position: 'absolute', top: '-22px' }\">\n                        <sui-label v-if=\"getErrorMsg(column)\" pointing=\"below\" basic color=\"red\">{{getErrorMsg(column)}}</sui-label>\n                    </div>\n                </sui-table-header-cell>\n            </sui-table-row>\n        </sui-table-header>`,\n    props: ['fields', 'state', 'errors', 'caption'],\n    data: function () {\n        return { columns: this.fields, isDeleteAll: false };\n    },\n    methods: {\n        onToggleDeleteAll: function () {\n            this.$nextTick(() => {\n                atk.eventBus.emit(this.$root.$el.id + '-toggle-delete-all', { isOn: this.$refs.check.checked });\n            });\n        },\n        getTextAlign: function (column) {\n            let align = 'left';\n            if (!column.isEditable) {\n                switch (column.type) {\n                    case 'integer':\n                    case 'float':\n                    case 'atk4_money':\n                        align = 'right';\n\n                        break;\n                }\n            }\n\n            return align;\n        },\n        getVisibleColumns: function () {\n            let count = 1; // add deletable column;\n            this.columns.forEach((field) => {\n                count = field.isVisible ? count + 1 : count;\n            });\n\n            return count;\n        },\n        hasError: function () {\n            return Object.keys(this.errors).length > 0;\n        },\n        hasCaption: function () {\n            return this.caption;\n        },\n        getErrorMsg: function (column) {\n            if (this.hasError()) {\n                const rows = Object.keys(this.errors);\n                for (let i = 0; i < rows.length; i++) {\n                    const error = this.errors[rows[i]].filter((col) => col.name === column.name);\n                    if (error.length > 0) {\n                        return error[0].msg;\n                    }\n                }\n            }\n\n            return null;\n        },\n    },\n    computed: {\n        isIndeterminate: function () {\n            return this.state === 'indeterminate';\n        },\n        isChecked: function () {\n            return this.state === 'on';\n        },\n    },\n};\n","import $ from 'external/jquery';\nimport atk from 'atk';\nimport multilineBody from './multiline-body.component';\nimport multilineHeader from './multiline-header.component';\n\nexport default {\n    name: 'atk-multiline',\n    template: `\n        <div>\n            <sui-table v-bind=\"tableProp\">\n                <atk-multiline-header\n                    :fields=\"fieldData\"\n                    :state=\"getMainToggleState\"\n                    :errors=\"errors\"\n                    :caption=\"caption\"\n                ></atk-multiline-header>\n                <atk-multiline-body\n                    @onTabLastRow=\"onTabLastRow\"\n                    :fieldDefs=\"fieldData\"\n                    :rowData=\"rowData\"\n                    :deletables=\"getDeletables\"\n                    :errors=\"errors\"\n                ></atk-multiline-body>\n                <sui-table-footer>\n                    <sui-table-row>\n                        <sui-table-header-cell></sui-table-header-cell>\n                        <sui-table-header-cell :colspan=\"getSpan\" textAlign=\"right\">\n                            <div is=\"vue:sui-button-group\">\n                                <sui-button ref=\"addBtn\" size=\"small\" @click.stop.prevent=\"onAdd\" type=\"button\" icon :disabled=\"isLimitReached\">\n                                    <sui-icon name=\"plus\"></sui-icon>\n                                </sui-button>\n                                <sui-button size=\"small\" @click.stop.prevent=\"onDelete\" type=\"button\" icon :disabled=\"isDeleteDisable\">\n                                    <sui-icon name=\"trash\"></sui-icon>\n                                </sui-button>\n                            </div>\n                        </sui-table-header-cell>\n                    </sui-table-row>\n                </sui-table-footer>\n            </sui-table>\n            <div>\n                <input ref=\"atkmlInput\" :form=\"form\" :name=\"name\" type=\"hidden\" :value=\"value\" />\n            </div>\n        </div>`,\n    props: {\n        data: Object,\n    },\n    data: function () {\n        const tableDefault = {\n            basic: false,\n            celled: false,\n            collapsing: false,\n            stackable: false,\n            inverted: false,\n        };\n\n        return {\n            form: this.data.formName,\n            value: this.data.inputValue,\n            name: this.data.inputName, // form input name where to set multiline content value.\n            rowData: [],\n            fieldData: this.data.fields || [],\n            eventFields: this.data.eventFields || [],\n            deletables: [],\n            hasChangeCb: this.data.hasChangeCb,\n            errors: {},\n            caption: this.data.caption || null,\n            tableProp: { ...tableDefault, ...this.data.tableProps || {} },\n        };\n    },\n    components: {\n        'atk-multiline-body': multilineBody,\n        'atk-multiline-header': multilineHeader,\n    },\n    mounted: function () {\n        this.rowData = this.buildRowData(this.value ? this.value : '[]');\n        this.updateInputValue();\n\n        atk.eventBus.on(this.$root.$el.id + '-update-row', (payload) => {\n            this.onUpdate(payload.rowId, payload.fieldName, payload.value);\n        });\n\n        atk.eventBus.on(this.$root.$el.id + '-toggle-delete', (payload) => {\n            const i = this.deletables.indexOf(payload.rowId);\n            if (i !== -1) {\n                this.deletables.splice(i, 1);\n            } else {\n                this.deletables.push(payload.rowId);\n            }\n        });\n\n        atk.eventBus.on(this.$root.$el.id + '-toggle-delete-all', (payload) => {\n            this.deletables = [];\n            if (payload.isOn) {\n                this.rowData.forEach((row) => {\n                    this.deletables.push(row.__atkml);\n                });\n            }\n        });\n\n        atk.eventBus.on(this.$root.$el.id + '-multiline-rows-error', (payload) => {\n            this.errors = { ...payload.errors };\n        });\n    },\n    methods: {\n        onTabLastRow: function () {\n            if (!this.isLimitReached && this.data.addOnTab) {\n                this.onAdd();\n            }\n        },\n        onAdd: function () {\n            const newRow = this.createRow(this.data.fields);\n            this.rowData.push(newRow);\n            this.updateInputValue();\n            if (this.data.afterAdd && typeof this.data.afterAdd === 'function') {\n                this.data.afterAdd(JSON.parse(this.value));\n            }\n            this.fetchExpression(newRow.__atkml);\n            this.fetchOnChangeAction();\n        },\n        onDelete: function () {\n            this.deletables.forEach((atkmlId) => {\n                this.deleteRow(atkmlId);\n            });\n            this.deletables = [];\n            this.updateInputValue();\n            this.fetchOnChangeAction();\n            if (this.data.afterDelete && typeof this.data.afterDelete === 'function') {\n                this.data.afterDelete(JSON.parse(this.value));\n            }\n        },\n        onUpdate: function (atkmlId, fieldName, value) {\n            this.updateFieldInRow(atkmlId, fieldName, value);\n            this.clearError(atkmlId, fieldName);\n            this.updateInputValue();\n\n            if (!this.onUpdate.debouncedFx) {\n                this.onUpdate.debouncedFx = atk.createDebouncedFx(() => {\n                    this.onUpdate.debouncedFx = null;\n                    this.fetchExpression(atkmlId);\n                    this.fetchOnChangeAction(fieldName);\n                }, 250);\n            }\n            this.onUpdate.debouncedFx.call(this);\n        },\n        /**\n         * Creates a new row of data and\n         * set values to default if available.\n         */\n        createRow: function (fields) {\n            const row = {};\n            fields.forEach((field) => {\n                row[field.name] = field.default;\n            });\n            row.__atkml = this.getUUID();\n\n            return row;\n        },\n        deleteRow: function (atkmlId) {\n            this.rowData.splice(this.rowData.findIndex((row) => row.__atkml === atkmlId), 1);\n            delete this.errors[atkmlId];\n        },\n        /**\n         * Update the value of the field in rowData.\n         */\n        updateFieldInRow: function (atkmlId, fieldName, value) {\n            this.rowData.forEach((row) => {\n                if (row.__atkml === atkmlId) {\n                    row[fieldName] = value;\n                }\n            });\n        },\n        clearError: function (atkmlId, fieldName) {\n            if (atkmlId in this.errors) {\n                const errors = this.errors[atkmlId].filter((error) => error.name !== fieldName);\n                this.errors[atkmlId] = [...errors];\n                if (errors.length === 0) {\n                    delete this.errors[atkmlId];\n                }\n            }\n        },\n        /**\n         * Update Multi-line Form input with all rowData values\n         * as JSON string.\n         */\n        updateInputValue: function () {\n            this.value = JSON.stringify(this.rowData);\n        },\n        /**\n         * Build rowData from JSON string.\n         */\n        buildRowData: function (jsonValue) {\n            const rows = JSON.parse(jsonValue);\n            rows.forEach((row) => {\n                row.__atkml = this.getUUID();\n            });\n\n            return rows;\n        },\n        /**\n         * Check if one of the field use expression.\n         */\n        hasExpression: function () {\n            return this.fieldData.filter((field) => field.isExpr).length > 0;\n        },\n        /**\n         * Send on change action to server.\n         * Use regular api call in order\n         * for return js to be fully evaluated.\n         */\n        fetchOnChangeAction: function (fieldName = null) {\n            if (this.hasChangeCb && (fieldName === null || this.eventFields.indexOf(fieldName) !== -1)) {\n                $(this.$refs.addBtn.$el).api({\n                    on: 'now',\n                    url: this.data.url,\n                    method: 'POST',\n                    data: { __atkml_action: 'on-change', rows: this.value },\n                });\n            }\n        },\n        postData: async function (row) {\n            const data = { ...row };\n            const context = this.$refs.addBtn.$el;\n            data.__atkml_action = 'update-row';\n            try {\n                return await atk.apiService.suiFetch(this.data.url, { data: data, method: 'POST', stateContext: context });\n            } catch (e) {\n                console.error(e);\n            }\n        },\n        /**\n         * Get expressions values from server.\n         */\n        fetchExpression: async function (atkmlId) {\n            if (this.hasExpression()) {\n                const row = this.findRow(atkmlId);\n                // server will return expression field - value if define.\n                if (row) {\n                    const resp = await this.postData(row);\n                    if (resp.expressions) {\n                        const fields = Object.keys(resp.expressions);\n                        fields.forEach((field) => {\n                            this.updateFieldInRow(atkmlId, field, resp.expressions[field]);\n                        });\n                        this.updateInputValue();\n                    }\n                }\n            }\n        },\n        findRow: function (atkmlId) {\n            return this.rowData.find((row) => row.__atkml === atkmlId);\n        },\n        getInputElement: function () {\n            return this.$refs.atkmlInput;\n        },\n        /**\n         * UUID v4 generator.\n         */\n        getUUID: function () {\n            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n                const r = Math.floor(Math.random() * 16);\n                const v = c === 'x' ? r : (r & (0x3 | 0x8)); // eslint-disable-line no-bitwise\n\n                return v.toString(16);\n            });\n        },\n    },\n    computed: {\n        getSpan: function () {\n            return this.fieldData.length - 1;\n        },\n        getDeletables: function () {\n            return this.deletables;\n        },\n        /**\n         * Return Delete all checkbox state base on\n         * deletables entries.\n         */\n        getMainToggleState: function () {\n            let state = 'off';\n            if (this.deletables.length > 0) {\n                if (this.deletables.length === this.rowData.length) {\n                    state = 'on';\n                } else {\n                    state = 'indeterminate';\n                }\n            }\n\n            return state;\n        },\n        isDeleteDisable: function () {\n            return !this.deletables.length > 0;\n        },\n        isLimitReached: function () {\n            if (this.data.rowLimit === 0) {\n                return false;\n            }\n\n            return this.data.rowLimit < this.rowData.length + 1;\n        },\n    },\n};\n","import multilineRow from './multiline-row.component';\n\nexport default {\n    name: 'atk-multiline-body',\n    template: `\n        <sui-table-body>\n            <atk-multiline-row\n                :fields=\"fields\"\n                v-for=\"(row, i) in rows\" :key=\"row.__atkml\"\n                @onTabLastColumn=\"onTabLastColumn(i)\"\n                :rowId=\"row.__atkml\"\n                :isDeletable=\"isDeletableRow(row)\"\n                :rowValues=\"row\"\n                :error=\"getError(row.__atkml)\"\n            ></atk-multiline-row>\n        </sui-table-body>`,\n    props: ['fieldDefs', 'rowData', 'deletables', 'errors'],\n    data: function () {\n        return { fields: this.fieldDefs };\n    },\n    created: function () {\n    },\n    components: {\n        'atk-multiline-row': multilineRow,\n    },\n    computed: {\n        rows: function () {\n            return this.rowData;\n        },\n    },\n    emits: ['onTabLastRow'],\n    methods: {\n        onTabLastColumn: function (rowIndex) {\n            if (rowIndex + 1 === this.rowData.length) {\n                this.$emit('onTabLastRow');\n            }\n        },\n        isDeletableRow: function (row) {\n            return this.deletables.indexOf(row.__atkml) !== -1;\n        },\n        getError: function (rowId) {\n            if (rowId in this.errors) {\n                return this.errors[rowId];\n            }\n\n            return null;\n        },\n    },\n};\n","import atk from 'atk';\nimport multilineCell from './multiline-cell.component';\n\n/**\n * This will create a table td element using sui-table-cell.\n * The td element is created only if column as set isVisible = true;\n * The td element will add a multiline cell element.\n * the multiline cell will set it's own template component depending on the fieldType.\n * getValue\n */\nexport default {\n    name: 'atk-multiline-row',\n    template: `\n        <sui-table-row :verticalAlign=\"'middle'\">\n            <sui-table-cell textAlign=\"center\">\n                <input type=\"checkbox\" @input=\"onToggleDelete\" v-model=\"toDelete\" />\n            </sui-table-cell>\n            <sui-table-cell\n                v-for=\"(column, i) in columns\"\n                v-if=\"column.isVisible\"\n                @keydown.tab=\"onTab(i)\"\n                v-bind=\"column.cellProps\"\n                :width=null\n                :state=\"getErrorState(column)\"\n                :style=\"{ overflow: 'visible' }\"\n            >\n                <atk-multiline-cell\n                    :cellData=\"column\"\n                    @update-value=\"onUpdateValue\"\n                    :fieldValue=\"getValue(column)\"\n                ></atk-multiline-cell>\n            </sui-table-cell>\n        </sui-table-row>`,\n    props: ['fields', 'rowId', 'isDeletable', 'rowValues', 'error'],\n    data: function () {\n        return { columns: this.fields };\n    },\n    components: {\n        'atk-multiline-cell': multilineCell,\n    },\n    computed: {\n    /**\n     * toDelete is bind by v-model, thus we need a setter for\n     * computed property to work.\n     * When isDeletable is pass, will set checkbox according to it's value.\n     */\n        toDelete: {\n            get: function () {\n                return this.isDeletable;\n            },\n            set: function (v) {\n                return v;\n            },\n        },\n    },\n    emits: ['onTabLastColumn'],\n    methods: {\n        onTab: function (columnIndex) {\n            if (columnIndex === this.columns.filter((column) => column.isEditable).length) {\n                this.$emit('onTabLastColumn');\n            }\n        },\n        getErrorState: function (column) {\n            if (this.error) {\n                const error = this.error.filter((e) => column.name === e.name);\n                if (error.length > 0) {\n                    return 'error';\n                }\n            }\n\n            return null;\n        },\n        getColumnWidth: function (column) {\n            return column.fieldOptions ? column.fieldOptions.width : null;\n        },\n        onEdit: function () {\n            this.isEditing = true;\n        },\n        onToggleDelete: function (e) {\n            atk.eventBus.emit(this.$root.$el.id + '-toggle-delete', { rowId: this.rowId });\n        },\n        onUpdateValue: function (fieldName, value) {\n            atk.eventBus.emit(this.$root.$el.id + '-update-row', { rowId: this.rowId, fieldName: fieldName, value: value });\n        },\n        getValue: function (column) {\n            return this.rowValues[column.name] || column.default;\n        },\n    },\n};\n","import multilineReadOnly from './multiline-readonly.component';\nimport multilineTextarea from './multiline-textarea.component';\nimport atkDatePicker from '../share/atk-date-picker';\nimport atkLookup from '../share/atk-lookup';\n\nexport default {\n    name: 'atk-multiline-cell',\n    template: `\n        <component\n            :is=\"getComponent()\"\n            v-bind=\"getComponentProps()\"\n            ref=\"cell\"\n            :fluid=\"true\"\n            class=\"fluid\"\n            @input=\"onInput\"\n            @onChange=\"onChange\"\n            v-model=\"inputValue\"\n            :name=\"inputName\"\n        ></component>`,\n    components: {\n        'atk-multiline-readonly': multilineReadOnly,\n        'atk-multiline-textarea': multilineTextarea,\n        'atk-date-picker': atkDatePicker,\n        'atk-lookup': atkLookup,\n    },\n    props: ['cellData', 'fieldValue'],\n    data: function () {\n        return {\n            fieldName: this.cellData.name,\n            type: this.cellData.type,\n            inputName: '-' + this.cellData.name,\n            inputValue: this.fieldValue,\n        };\n    },\n    emits: ['update-value'],\n    methods: {\n        getComponent: function () {\n            return this.cellData.definition.component;\n        },\n        getComponentProps: function () {\n            if (this.getComponent() === 'atk-multiline-readonly') {\n                return { readOnlyValue: this.fieldValue };\n            }\n\n            return this.cellData.definition.componentProps;\n        },\n        onInput: function (value) {\n            // this.inputValue = this.getTypeValue(value);\n            this.$emit('update-value', this.fieldName, this.inputValue);\n        },\n        onChange: function (value) {\n            this.onInput(value);\n        },\n        /**\n         * return input value based on their type.\n         */\n        getTypeValue: function (value) {\n            let r = value;\n            if (this.type === 'boolean') {\n                r = value.target.checked;\n            }\n\n            return r;\n        },\n    },\n};\n","export default {\n    name: 'atk-textarea',\n    template: '<textarea v-model=\"text\" @input=\"handleChange\"></textarea>',\n    props: { value: [String, Number] },\n    data: function () {\n        return { text: this.value };\n    },\n    emits: ['input'],\n    methods: {\n        handleChange: function (event) {\n            this.$emit('input', event.target.value);\n        },\n    },\n};\n","/* global flatpickr */ // loaded after main JS\n\n/**\n * Wrapper for vue-flatpickr-component component.\n * https://github.com/ankurk91/vue-flatpickr-component\n *\n * Props:\n * config: Any of flatpickr options\n *\n * Will emit a dateChange event when date is set.\n */\n\nconst template = '<flatpickr-picker v-model=\"date\" :config=\"flatPickr\" @on-change=\"onChange\"></flatpickr-picker>';\n\nexport default {\n    name: 'atk-date-picker',\n    template: template,\n    props: ['config', 'value'],\n    data: function () {\n        const { useDefault, ...fpickr } = this.config;\n\n        if (useDefault && !fpickr.defaultDate && !this.value) {\n            fpickr.defaultDate = new Date();\n        } else if (this.value) {\n            fpickr.defaultDate = this.value;\n        }\n\n        if (!fpickr.locale) {\n            fpickr.locale = flatpickr.l10ns.default;\n        }\n\n        return {\n            flatPickr: fpickr,\n            date: null,\n        };\n    },\n    emits: ['setDefault', 'onChange'],\n    mounted: function () {\n        // if value is not set but default date is, then emit proper string value to parent.\n        if (!this.value && this.flatPickr.defaultDate) {\n            if (this.flatPickr.defaultDate instanceof Date) {\n                this.$emit('setDefault', flatpickr.formatDate(this.config.defaultDate, this.config.dateFormat));\n            } else {\n                this.$emit('setDefault', this.flatPickr.defaultDate);\n            }\n        }\n    },\n    methods: {\n        onChange: function (date) {\n            this.$emit('onChange', flatpickr.formatDate(date[0], this.flatPickr.dateFormat));\n        },\n    },\n};\n","import atk from 'atk';\n\n/**\n * Wrapper for Fomantic-UI dropdown component into a lookup component.\n *\n * Props:\n * config:\n * url: the callback URL. Callback should return model data in form of { key: modelId, text: modelTitle, value: modelId }\n * reference: the reference field name associate with model or hasOne name. This field name will be sent along with URL callback parameter as of 'field=name'.\n * ui: the css class name to apply to dropdown.\n * Note: The remaining config object may contain any or sui-dropdown { props: value } pair.\n *\n * value: The selected value.\n * optionalValue: The initial list of options for the dropdown.\n */\n\nconst template = `\n    <sui-dropdown\n        v-bind=\"dropdownProps\"\n        ref=\"drop\"\n        ` /* :loading=\"isLoading\" */\n        + `@input=\"onChange\"\n        @filtered=\"onFiltered\"\n        v-model=\"current\"\n        :class=\"css\"\n    ></sui-dropdown>`;\n\nexport default {\n    name: 'atk-lookup',\n    template: template,\n    props: ['config', 'value', 'optionalValue'],\n    data: function () {\n        const {\n            url, reference, ui, ...suiDropdown\n        } = this.config;\n        suiDropdown.selection = true;\n\n        return {\n            dropdownProps: suiDropdown,\n            current: this.value,\n            url: url || null,\n            css: [ui],\n            isLoading: false,\n            field: reference,\n            query: '',\n            temp: '',\n        };\n    },\n    mounted: function () {\n        if (this.optionalValue) {\n            this.dropdownProps.options = Array.isArray(this.optionalValue) ? this.optionalValue : [this.optionalValue];\n        }\n    },\n    emits: ['onChange'],\n    methods: {\n        onChange: function (value) {\n            this.$emit('onChange', value);\n        },\n        /**\n         * Receive user input text for search.\n         */\n        onFiltered: function (inputValue) {\n            if (inputValue) {\n                this.isLoading = true;\n            }\n\n            if (!this.onFiltered.debouncedFx) {\n                this.onFiltered.debouncedFx = atk.createDebouncedFx(() => {\n                    this.onFiltered.debouncedFx = null;\n                    if (this.query !== this.temp) {\n                        this.query = this.temp;\n                        if (this.query) {\n                            this.fetchItems(this.query);\n                        }\n                    }\n                }, 250);\n            }\n            this.temp = inputValue;\n            this.onFiltered.debouncedFx(this);\n        },\n        /**\n         * Fetch new data from server.\n         */\n        fetchItems: async function (q) {\n            try {\n                const data = { atkVueLookupQuery: q, atkVueLookupField: this.field };\n                const response = await atk.apiService.suiFetch(this.url, { method: 'get', data: data });\n                if (response.success) {\n                    this.dropdownProps.options = response.results;\n                }\n            } catch (e) {\n                console.error(e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n    },\n};\n"],"names":["name","template","props","data","columns","this","fields","isDeleteAll","methods","onToggleDeleteAll","$nextTick","atk","$root","$el","id","isOn","$refs","check","checked","getTextAlign","column","align","isEditable","type","getVisibleColumns","count","forEach","field","isVisible","hasError","Object","keys","errors","length","hasCaption","caption","getErrorMsg","rows","i","error","filter","col","msg","computed","isIndeterminate","state","isChecked","form","formName","value","inputValue","inputName","rowData","fieldData","eventFields","deletables","hasChangeCb","tableProp","basic","celled","collapsing","stackable","inverted","tableProps","components","fieldDefs","created","String","Number","text","emits","handleChange","event","$emit","target","useDefault","fpickr","config","defaultDate","Date","locale","flatpickr","l10ns","default","flatPickr","date","mounted","formatDate","dateFormat","onChange","url","reference","ui","suiDropdown","selection","dropdownProps","current","css","isLoading","query","temp","optionalValue","options","Array","isArray","onFiltered","debouncedFx","fetchItems","async","q","atkVueLookupQuery","atkVueLookupField","response","method","success","results","e","console","fieldName","cellData","fieldValue","getComponent","definition","component","getComponentProps","readOnlyValue","componentProps","onInput","getTypeValue","r","toDelete","get","isDeletable","set","v","onTab","columnIndex","getErrorState","getColumnWidth","fieldOptions","width","onEdit","isEditing","onToggleDelete","rowId","onUpdateValue","getValue","rowValues","onTabLastColumn","rowIndex","isDeletableRow","row","indexOf","__atkml","getError","multilineHeader","buildRowData","updateInputValue","payload","onUpdate","splice","push","onTabLastRow","isLimitReached","addOnTab","onAdd","newRow","createRow","afterAdd","JSON","parse","fetchExpression","fetchOnChangeAction","onDelete","atkmlId","deleteRow","afterDelete","updateFieldInRow","clearError","call","getUUID","findIndex","stringify","jsonValue","hasExpression","isExpr","$","addBtn","api","on","__atkml_action","postData","context","stateContext","findRow","resp","expressions","find","getInputElement","atkmlInput","replace","c","Math","floor","random","toString","getSpan","getDeletables","getMainToggleState","isDeleteDisable","rowLimit"],"sourceRoot":""}