{"version":3,"file":"js/atk-vue-multiline.min.js","mappings":"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","sources":["webpack://atk/./src/components/multiline/multiline-readonly.component.js","webpack://atk/./src/components/multiline/multiline-textarea.component.js","webpack://atk/./src/components/multiline/multiline-cell.component.js","webpack://atk/./src/components/multiline/multiline-header.component.js","webpack://atk/./src/components/multiline/multiline.component.js","webpack://atk/./src/components/multiline/multiline-body.component.js","webpack://atk/./src/components/multiline/multiline-row.component.js","webpack://atk/./src/components/share/atk-date-picker.js","webpack://atk/./src/components/share/atk-lookup.js"],"sourcesContent":["/**\n * Simply display a readonly value.\n */\n\nexport default {\n    template: '<div>{{readOnlyValue}}</div>',\n    name: 'atk-multiline-readonly',\n    props: ['readOnlyValue'],\n};\n","/**\n * Simple text area input to display in multiline component.\n */\nexport default {\n    name: 'atk-textarea',\n    template: '<textarea v-model=\"text\" @input=\"handleChange\"></textarea>',\n    props: { value: [String, Number] },\n    data: function () {\n        return { text: this.value };\n    },\n    methods: {\n        handleChange: function (event) {\n            this.$emit('input', event.target.value);\n        },\n    },\n};\n","import multilineReadOnly from './multiline-readonly.component';\nimport multilineTextarea from './multiline-textarea.component';\nimport atkDatePicker from '../share/atk-date-picker';\nimport atkLookup from '../share/atk-lookup';\n\nexport default {\n    name: 'atk-multiline-cell',\n    template: `\n    <component :is=\"getComponent()\"\n        :fluid=\"true\"\n        class=\"fluid\"\n        @input=\"onInput\"\n        @onChange=\"onChange\"\n        v-model=\"inputValue\"\n        :name=\"inputName\"\n        ref=\"cell\"\n        v-bind=\"getComponentProps()\"></component>\n  `,\n    components: {\n        'atk-multiline-readonly': multilineReadOnly,\n        'atk-multiline-textarea': multilineTextarea,\n        'atk-date-picker': atkDatePicker,\n        'atk-lookup': atkLookup,\n    },\n    props: ['cellData', 'fieldValue'],\n    data: function () {\n        return {\n            fieldName: this.cellData.name,\n            type: this.cellData.type,\n            inputName: '-' + this.cellData.name,\n            inputValue: this.fieldValue,\n        };\n    },\n    methods: {\n        getComponent: function () {\n            return this.cellData.definition.component;\n        },\n        getComponentProps: function () {\n            if (this.getComponent() === 'atk-multiline-readonly') {\n                return { readOnlyValue: this.fieldValue };\n            }\n\n            return this.cellData.definition.componentProps;\n        },\n        onInput: function (value) {\n            this.inputValue = this.getTypeValue(value);\n            this.$emit('update-value', this.fieldName, this.inputValue);\n        },\n        onChange: function (value) {\n            this.onInput(value);\n        },\n        /**\n         * return input value based on their type.\n         */\n        getTypeValue: function (value) {\n            let r = value;\n            if (this.type === 'boolean') {\n                r = value.target.checked;\n            }\n\n            return r;\n        },\n    },\n};\n","export default {\n    name: 'atk-multiline-header',\n    template: `\n     <sui-table-header>\n       <sui-table-row v-if=\"hasError()\">\n        <sui-table-cell :style=\"{background:'none'}\"></sui-table-cell>\n        <sui-table-cell :style=\"{background:'none'}\" state=\"error\" v-for=\"(column, idx) in columns\" :key=\"idx\" v-if=\"column.isVisible\" :textAlign=\"getTextAlign(column)\"><sui-icon name=\"attention\" v-if=\"getErrorMsg(column)\"></sui-icon>{{getErrorMsg(column)}}</sui-table-cell>\n      </sui-table-row>\n       <sui-table-row v-if=\"hasCaption()\">\n        <sui-table-headerCell :colspan=\"getVisibleColumns()\">{{caption}}</sui-table-headerCell>\n       </sui-table-row>\n        <sui-table-row :verticalAlign=\"'top'\">\n        <sui-table-header-cell width=\"one\" textAlign=\"center\"><input type=\"checkbox\" @input=\"onToggleDeleteAll\" :checked.prop=\"isChecked\" :indeterminate.prop=\"isIndeterminate\" ref=\"check\"></sui-table-header-cell>\n        <sui-table-header-cell v-for=\"(column, idx) in columns\" :key=\"idx\" v-if=\"column.isVisible\" :textAlign=\"getTextAlign(column)\">\n         <div>{{column.caption}}</div>\n         <div :style=\"{position: 'absolute', top: '-22px'}\" v-if=\"false\"><sui-label pointing=\"below\" basic color=\"red\" v-if=\"getErrorMsg(column)\">{{getErrorMsg(column)}}</sui-label></div>\n        </sui-table-header-cell>\n      </sui-table-row>\n    </sui-table-header>\n  `,\n    props: ['fields', 'state', 'errors', 'caption'],\n    data: function () {\n        return { columns: this.fields, isDeleteAll: false };\n    },\n    methods: {\n        onToggleDeleteAll: function () {\n            this.$nextTick(() => {\n                atk.eventBus.emit(this.$root.$el.id + '-toggle-delete-all', { isOn: this.$refs.check.checked });\n            });\n        },\n        getTextAlign: function (column) {\n            let align = 'left';\n            if (!column.isEditable) {\n                switch (column.type) {\n                    case 'money':\n                    case 'integer':\n                    case 'number':\n                        align = 'right';\n\n                        break;\n                }\n            }\n\n            return align;\n        },\n        getVisibleColumns: function () {\n            let count = 1; // add deletable column;\n            this.columns.forEach((field) => {\n                count = field.isVisible ? count + 1 : count;\n            });\n\n            return count;\n        },\n        hasError: function () {\n            return Object.keys(this.errors).length > 0;\n        },\n        hasCaption: function () {\n            return this.caption;\n        },\n        getErrorMsg: function (column) {\n            if (this.hasError()) {\n                const rows = Object.keys(this.errors);\n                for (let i = 0; i < rows.length; i++) {\n                    const error = this.errors[rows[i]].filter((col) => col.name === column.name);\n                    if (error.length > 0) {\n                        return error[0].msg;\n                    }\n                }\n            }\n\n            return null;\n        },\n    },\n    computed: {\n        isIndeterminate: function () {\n            return this.state === 'indeterminate';\n        },\n        isChecked: function () {\n            return this.state === 'on';\n        },\n    },\n};\n","import multilineBody from './multiline-body.component';\nimport multilineHeader from './multiline-header.component';\n\n/**\n * MultiLine component.\n */\nexport default {\n    name: 'atk-multiline',\n    template: `<div>\n                <sui-table v-bind=\"tableProp\">\n                  <atk-multiline-header :fields=\"fieldData\" :state=\"getMainToggleState\" :errors=\"errors\" :caption=\"caption\"></atk-multiline-header>\n                  <atk-multiline-body @onTabLastRow=\"onTabLastRow\" :fieldDefs=\"fieldData\" :rowData=\"rowData\" :deletables=\"getDeletables\" :errors=\"errors\"></atk-multiline-body>\n                  <sui-table-footer>\n                    <sui-table-row>\n                        <sui-table-header-cell />\n                        <sui-table-header-cell :colspan=\"getSpan\" textAlign=\"right\">\n                        <div is=\"sui-button-group\">\n                         <sui-button size=\"small\" @click.stop.prevent=\"onAdd\" type=\"button\" icon=\"plus\" ref=\"addBtn\" :disabled=\"isLimitReached\"></sui-button>\n                         <sui-button size=\"small\" @click.stop.prevent=\"onDelete\" type=\"button\" icon=\"trash\" :disabled=\"isDeleteDisable\"></sui-button>\n                         </div>\n                        </sui-table-header-cell>\n                    </sui-table-row>\n                  </sui-table-footer>\n                </sui-table>\n                <div><input :form=\"form\" :name=\"name\" type=\"hidden\" :value=\"value\" ref=\"atkmlInput\"></div>\n             </div>`,\n    props: {\n        data: Object,\n    },\n    data: function () {\n        const tableDefault = {\n            basic: false,\n            celled: false,\n            collapsing: false,\n            stackable: false,\n            inverted: false,\n        };\n\n        return {\n            form: this.data.formName,\n            value: this.data.inputValue,\n            name: this.data.inputName, // form input name where to set multiline content value.\n            rowData: [],\n            fieldData: this.data.fields || [],\n            eventFields: this.data.eventFields || [],\n            deletables: [],\n            hasChangeCb: this.data.hasChangeCb,\n            errors: {},\n            caption: this.data.caption || null,\n            tableProp: { ...tableDefault, ...this.data.tableProps || {} },\n        };\n    },\n    components: {\n        'atk-multiline-body': multilineBody,\n        'atk-multiline-header': multilineHeader,\n    },\n    mounted: function () {\n        this.rowData = this.buildRowData(this.value);\n        this.updateInputValue();\n\n        atk.eventBus.on(this.$root.$el.id + '-update-row', (payload) => {\n            this.onUpdate(payload.rowId, payload.fieldName, payload.value);\n        });\n\n        atk.eventBus.on(this.$root.$el.id + '-toggle-delete', (payload) => {\n            const idx = this.deletables.indexOf(payload.rowId);\n            if (idx > -1) {\n                this.deletables.splice(idx, 1);\n            } else {\n                this.deletables.push(payload.rowId);\n            }\n        });\n\n        atk.eventBus.on(this.$root.$el.id + '-toggle-delete-all', (payload) => {\n            this.deletables = [];\n            if (payload.isOn) {\n                this.rowData.forEach((row) => {\n                    this.deletables.push(row.__atkml);\n                });\n            }\n        });\n\n        atk.eventBus.on(this.$root.$el.id + '-multiline-rows-error', (payload) => {\n            this.errors = { ...payload.errors };\n        });\n    },\n    methods: {\n        onTabLastRow: function () {\n            if (!this.isLimitReached && this.data.addOnTab) {\n                this.onAdd();\n            }\n        },\n        onAdd: function () {\n            const newRow = this.createRow(this.data.fields);\n            this.rowData.push(newRow);\n            this.updateInputValue();\n            if (this.data.afterAdd && typeof this.data.afterAdd === 'function') {\n                this.data.afterAdd(atk.utils.json().tryParse(this.value));\n            }\n            this.fetchExpression(newRow.__atkml);\n            this.fetchOnChangeAction();\n        },\n        onDelete: function () {\n            this.deletables.forEach((atkmlId) => {\n                this.deleteRow(atkmlId);\n            });\n            this.deletables = [];\n            this.updateInputValue();\n            this.fetchOnChangeAction();\n            if (this.data.afterDelete && typeof this.data.afterDelete === 'function') {\n                this.data.afterDelete(atk.utils.json().tryParse(this.value));\n            }\n        },\n        onUpdate: function (atkmlId, fieldName, value) {\n            this.updateFieldInRow(atkmlId, fieldName, value);\n            this.clearError(atkmlId, fieldName);\n            this.updateInputValue();\n\n            atk.debounce(() => {\n                this.fetchExpression(atkmlId);\n                this.fetchOnChangeAction(fieldName);\n            }, 300).call(this);\n        },\n        /**\n         * Creates a new row of data and\n         * set values to default if available.\n         */\n        createRow: function (fields) {\n            const row = {};\n            fields.forEach((field) => {\n                row[field.name] = field.default;\n            });\n            row.__atkml = this.getUUID();\n\n            return row;\n        },\n        deleteRow: function (atkmlId) {\n            this.rowData.splice(this.rowData.findIndex((row) => row.__atkml === atkmlId), 1);\n            delete this.errors[atkmlId];\n        },\n        /**\n         * Update the value of the field in rowData.\n         */\n        updateFieldInRow: function (atkmlId, fieldName, value) {\n            this.rowData.forEach((row) => {\n                if (row.__atkml === atkmlId) {\n                    row[fieldName] = value;\n                }\n            });\n        },\n        clearError: function (atkmlId, fieldName) {\n            if (atkmlId in this.errors) {\n                const errors = this.errors[atkmlId].filter((error) => error.name !== fieldName);\n                this.errors[atkmlId] = [...errors];\n                if (errors.length === 0) {\n                    delete this.errors[atkmlId];\n                }\n            }\n        },\n        /**\n         * Update Multi-line Form input with all rowData values\n         * as json string.\n         */\n        updateInputValue: function () {\n            this.value = JSON.stringify(this.rowData);\n        },\n        /**\n         * Build rowData from json string.\n         */\n        buildRowData: function (jsonValue) {\n            const rows = atk.utils.json().tryParse(jsonValue, []);\n            rows.forEach((row) => {\n                row.__atkml = this.getUUID();\n            });\n\n            return rows;\n        },\n        /**\n         * Check if one of the field use expression.\n         */\n        hasExpression: function () {\n            return this.fieldData.filter((field) => field.isExpr).length > 0;\n        },\n        /**\n         * Send on change action to server.\n         * Use regular api call in order\n         * for return js to be fully evaluate.\n         */\n        fetchOnChangeAction: function (fieldName = null) {\n            if (this.hasChangeCb && (fieldName === null || this.eventFields.indexOf(fieldName) > -1)) {\n                jQuery(this.$refs.addBtn.$el).api({\n                    on: 'now',\n                    url: this.data.url,\n                    method: 'post',\n                    data: { __atkml_action: 'on-change', rows: this.value },\n                });\n            }\n        },\n        postData: async function (row) {\n            const data = { ...row };\n            const context = this.$refs.addBtn.$el;\n            data.__atkml_action = 'update-row';\n            try {\n                return await atk.apiService.suiFetch(this.data.url, { data: data, method: 'post', stateContext: context });\n            } catch (e) {\n                console.error(e);\n            }\n        },\n        /**\n         * Get expressions values from server.\n         */\n        fetchExpression: async function (atkmlId) {\n            if (this.hasExpression()) {\n                const row = this.findRow(atkmlId);\n                // server will return expression field - value if define.\n                if (row) {\n                    const resp = await this.postData(row);\n                    if (resp.expressions) {\n                        const fields = Object.keys(resp.expressions);\n                        fields.forEach((field) => {\n                            this.updateFieldInRow(atkmlId, field, resp.expressions[field]);\n                        });\n                        this.updateInputValue();\n                    }\n                }\n            }\n        },\n        findRow: function (atkmlId) {\n            return this.rowData.find((row) => row.__atkml === atkmlId);\n        },\n        getInputElement: function () {\n            return this.$refs.atkmlInput;\n        },\n        /**\n         * UUID v4 generator.\n         */\n        getUUID: function () {\n            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n                const r = Math.floor(Math.random() * 16);\n                const v = c === 'x' ? r : (r & (0x3 | 0x8)); // eslint-disable-line no-bitwise\n\n                return v.toString(16);\n            });\n        },\n    },\n    computed: {\n        getSpan: function () {\n            return this.fieldData.length - 1;\n        },\n        getDeletables: function () {\n            return this.deletables;\n        },\n        /**\n         * Return Delete all checkbox state base on\n         * deletables entries.\n         */\n        getMainToggleState: function () {\n            let state = 'off';\n            if (this.deletables.length > 0) {\n                if (this.deletables.length === this.rowData.length) {\n                    state = 'on';\n                } else {\n                    state = 'indeterminate';\n                }\n            }\n\n            return state;\n        },\n        isDeleteDisable: function () {\n            return !this.deletables.length > 0;\n        },\n        isLimitReached: function () {\n            if (this.data.rowLimit === 0) {\n                return false;\n            }\n\n            return this.data.rowLimit < this.rowData.length + 1;\n        },\n    },\n};\n","import multilineRow from './multiline-row.component';\n\nexport default {\n    name: 'atk-multiline-body',\n    template: `\n    <sui-table-body>\n      <atk-multiline-row v-for=\"(row, idx) in rows\" :key=\"row.__atkml\"\n      @onTabLastColumn=\"onTabLastColumn(idx)\"\n      :fields=\"fields\"\n      :rowId=\"row.__atkml\"\n      :isDeletable=\"isDeletableRow(row)\"\n      :rowValues=\"row\"\n      :error=\"getError(row.__atkml)\"></atk-multiline-row>\n    </sui-table-body>\n  `,\n    props: ['fieldDefs', 'rowData', 'deletables', 'errors'],\n    data: function () {\n        return { fields: this.fieldDefs };\n    },\n    created: function () {\n    },\n    components: {\n        'atk-multiline-row': multilineRow,\n    },\n    computed: {\n        rows: function () {\n            return this.rowData;\n        },\n    },\n    methods: {\n        onTabLastColumn: function (idx) {\n            if (idx + 1 === this.rowData.length) {\n                this.$emit('onTabLastRow');\n            }\n        },\n        isDeletableRow: function (row) {\n            return this.deletables.indexOf(row.__atkml) > -1;\n        },\n        getError: function (rowId) {\n            if (rowId in this.errors) {\n                return this.errors[rowId];\n            }\n\n            return null;\n        },\n    },\n};\n","import multilineCell from './multiline-cell.component';\n\n/**\n * A row component.\n * This will create a table td element using sui-table-cell.\n * The td element is created only if column as set isVisible = true;\n * The td element will add a multiline cell element.\n * the multiline cell will set it's own template component depending on the fieldType.\n * getValue\n */\nexport default {\n    name: 'atk-multiline-row',\n    template: `\n    <sui-table-row :verticalAlign=\"'middle'\">\n        <sui-table-cell width=\"one\" textAlign=\"center\"><input type=\"checkbox\" @input=\"onToggleDelete\" v-model=\"toDelete\"></sui-table-cell>\n        <sui-table-cell  @keydown.tab=\"onTab(idx)\" v-for=\"(column, idx) in columns\" :key=\"idx\" :state=\"getErrorState(column)\" v-bind=\"column.cellProps\" :style=\"{overflow: 'visible'}\" v-if=\"column.isVisible\">\n         <atk-multiline-cell\n           :cellData=\"column\"\n           @update-value=\"onUpdateValue\"\n           :fieldValue=\"getValue(column)\"></atk-multiline-cell>\n        </sui-table-cell>\n    </sui-table-row>\n  `,\n    props: ['fields', 'rowId', 'isDeletable', 'rowValues', 'error'],\n    data: function () {\n        return { columns: this.fields };\n    },\n    components: {\n        'atk-multiline-cell': multilineCell,\n    },\n    computed: {\n    /**\n     * toDelete is bind by v-model, thus we need a setter for\n     * computed property to work.\n     * When isDeletable is pass, will set checkbox according to it's value.\n     */\n        toDelete: {\n            get: function () {\n                return this.isDeletable;\n            },\n            set: function (v) {\n                return v;\n            },\n        },\n    },\n    methods: {\n        onTab: function (idx) {\n            if (idx === this.columns.filter((column) => column.isEditable).length) {\n                this.$emit('onTabLastColumn');\n            }\n        },\n        getErrorState: function (column) {\n            if (this.error) {\n                const error = this.error.filter((e) => column.name === e.name);\n                if (error.length > 0) {\n                    return 'error';\n                }\n            }\n\n            return null;\n        },\n        getColumnWidth: function (column) {\n            return column.fieldOptions ? column.fieldOptions.width : null;\n        },\n        onEdit: function () {\n            this.isEditing = true;\n        },\n        onToggleDelete: function (e) {\n            atk.eventBus.emit(this.$root.$el.id + '-toggle-delete', { rowId: this.rowId });\n        },\n        onUpdateValue: function (fieldName, value) {\n            atk.eventBus.emit(this.$root.$el.id + '-update-row', { rowId: this.rowId, fieldName: fieldName, value: value });\n        },\n        getValue: function (column) {\n            return this.rowValues[column.name] || column.default;\n        },\n    },\n};\n","/**\n * Wrapper for vue-flatpickr-component component.\n * https://github.com/ankurk91/vue-flatpickr-component\n *\n * Props:\n * config: Any of flatpickr options\n *\n * Will emit a dateChange event when date is set.\n */\n\nconst template = '<flatpickr-picker v-model=\"date\" :config=\"flatPickr\" @on-change=\"onChange\"></flatpickr-picker>';\n\nexport default {\n    name: 'atk-date-picker',\n    template: template,\n    props: ['config', 'value'],\n    data: function () {\n        const { useDefault, ...fpickr } = this.config;\n\n        if (useDefault && !fpickr.defaultDate && !this.value) {\n            fpickr.defaultDate = new Date();\n        } else if (this.value) {\n            fpickr.defaultDate = this.value;\n        }\n\n        if (!fpickr.locale) {\n            fpickr.locale = flatpickr.l10ns.default;\n        }\n\n        return {\n            flatPickr: fpickr,\n            date: null,\n        };\n    },\n    mounted: function () {\n        // if value is not set but default date is, then emit proper string value to parent.\n        if (!this.value && this.flatPickr.defaultDate) {\n            if (this.flatPickr.defaultDate instanceof Date) {\n                this.$emit('setDefault', flatpickr.formatDate(this.config.defaultDate, this.config.dateFormat));\n            } else {\n                this.$emit('setDefault', this.flatPickr.defaultDate);\n            }\n        }\n    },\n    methods: {\n        onChange: function (date) {\n            this.$emit('onChange', flatpickr.formatDate(date[0], this.flatPickr.dateFormat));\n        },\n    },\n};\n","/**\n * Wrapper for Fomantic-UI dropdown component into a lookup component.\n *\n * Props:\n * config:\n * url: the callback url. Callback should return model data in form of { key: modelId, text: modelTitle, value: modelId }\n * reference: the reference field name associate with model or hasOne name. This field name will be sent along with url callback parameter as of 'field=name'.\n * ui: the css class name to apply to dropdown.\n * Note: The remaining config object may contain any or sui-dropdown {props: value} pair.\n *\n * value: The selected value.\n * optionalValue: The initial list of options for the dropdown.\n */\n\nconst template = `<sui-dropdown\n                    ref=\"drop\"\n                    v-bind=\"dropdownProps\"\n                    :loading=\"isLoading\"\n                    @input=\"onChange\"\n                    @filtered=\"onFiltered\"\n                    v-model=\"current\"\n                    :class=\"css\"></sui-dropdown>`;\n\nexport default {\n    name: 'atk-lookup',\n    template: template,\n    props: ['config', 'value', 'optionalValue'],\n    data: function () {\n        const {\n            url, reference, ui, ...suiDropdown\n        } = this.config;\n        suiDropdown.selection = true;\n\n        return {\n            dropdownProps: suiDropdown,\n            current: this.value,\n            url: url || null,\n            css: [ui],\n            isLoading: false,\n            field: reference,\n            query: '',\n            temp: '',\n        };\n    },\n    mounted: function () {\n        if (this.optionalValue) {\n            this.dropdownProps.options = Array.isArray(this.optionalValue) ? this.optionalValue : [this.optionalValue];\n        }\n    },\n    methods: {\n        onChange: function (value) {\n            this.$emit('onChange', value);\n        },\n        /**\n         * Receive user input text for search.\n         */\n        onFiltered: function (inputValue) {\n            if (inputValue) {\n                this.isLoading = true;\n            }\n            this.temp = inputValue;\n            atk.debounce(() => {\n                if (this.query !== this.temp) {\n                    this.query = this.temp;\n                    if (this.query) {\n                        this.fetchItems(this.query);\n                    }\n                }\n            }, 300).call(this);\n        },\n        /**\n         * Fetch new data from server.\n         */\n        fetchItems: async function (q) {\n            try {\n                const data = { atkVueLookupQuery: q, atkVueLookupField: this.field };\n                const response = await atk.apiService.suiFetch(this.url, { method: 'get', data: data });\n                if (response.success) {\n                    this.dropdownProps.options = response.results;\n                }\n                this.isLoading = false;\n            } catch (e) {\n                console.error(e);\n                this.isLoading = false;\n            }\n        },\n    },\n};\n"],"names":["name","template","props","value","String","Number","data","text","this","methods","handleChange","event","$emit","target","components","multilineTextarea","atkDatePicker","atkLookup","fieldName","cellData","type","inputName","inputValue","fieldValue","getComponent","definition","component","getComponentProps","readOnlyValue","componentProps","onInput","getTypeValue","onChange","r","checked","columns","fields","isDeleteAll","onToggleDeleteAll","$nextTick","atk","eventBus","emit","$root","$el","id","isOn","$refs","check","getTextAlign","column","align","isEditable","getVisibleColumns","count","forEach","field","isVisible","hasError","Object","keys","errors","length","hasCaption","caption","getErrorMsg","rows","i","error","filter","col","msg","computed","isIndeterminate","state","isChecked","form","formName","rowData","fieldData","eventFields","deletables","hasChangeCb","tableProp","basic","celled","collapsing","stackable","inverted","tableProps","fieldDefs","created","multilineCell","toDelete","get","isDeletable","set","v","onTab","idx","getErrorState","e","getColumnWidth","fieldOptions","width","onEdit","isEditing","onToggleDelete","rowId","onUpdateValue","getValue","rowValues","default","onTabLastColumn","isDeletableRow","row","indexOf","__atkml","getError","multilineHeader","mounted","buildRowData","updateInputValue","on","payload","onUpdate","splice","push","onTabLastRow","isLimitReached","addOnTab","onAdd","newRow","createRow","afterAdd","utils","json","tryParse","fetchExpression","fetchOnChangeAction","onDelete","atkmlId","deleteRow","afterDelete","updateFieldInRow","clearError","debounce","call","getUUID","findIndex","JSON","stringify","jsonValue","hasExpression","isExpr","jQuery","addBtn","api","url","method","__atkml_action","postData","async","context","apiService","suiFetch","stateContext","console","findRow","resp","expressions","find","getInputElement","atkmlInput","replace","c","Math","floor","random","toString","getSpan","getDeletables","getMainToggleState","isDeleteDisable","rowLimit","useDefault","fpickr","config","defaultDate","Date","locale","flatpickr","l10ns","flatPickr","date","formatDate","dateFormat","reference","ui","suiDropdown","selection","dropdownProps","current","css","isLoading","query","temp","optionalValue","options","Array","isArray","onFiltered","fetchItems","q","atkVueLookupQuery","atkVueLookupField","response","success","results"],"sourceRoot":""}