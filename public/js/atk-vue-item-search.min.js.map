{"version":3,"file":"js/atk-vue-item-search.min.js","mappings":"2JAcA,SACIA,KAAM,gBACNC,SAAW,8eAcXC,MAAO,CACHC,QAASC,OACTC,IAAKD,OACLE,EAAGF,OACHG,OAAQH,OACRI,SAAUJ,OACVK,QAASC,QAEbC,KAAM,WACF,MAAO,CACHC,MAAOC,KAAKP,EACZQ,KAAMD,KAAKP,EACXS,UAAU,EACVC,WAAY,KACZC,SAAUJ,KAAKJ,QAAQQ,SAE/B,EACAC,SAAU,CACNC,UAAW,WACP,MAAO,CACH,cAA8B,OAAfN,KAAKD,OAAiC,KAAfC,KAAKD,MAC3C,cAA8B,OAAfC,KAAKD,MAE5B,GAEJQ,QAAS,CACLC,QAAS,WACAR,KAAKQ,QAAQC,cACdT,KAAKQ,QAAQC,YAAcC,EAAAA,EAAAA,mBAAuBC,IAC9CX,KAAKQ,QAAQC,YAAc,KACvBT,KAAKD,QAAUC,KAAKC,OACD,KAAfD,KAAKD,QACLC,KAAKD,MAAQ,MAEjBC,KAAKY,YACLZ,KAAKC,KAAOD,KAAKD,MACrB,GACDC,KAAKJ,QAAQiB,eAEpBb,KAAKQ,QAAQC,YAAYK,KAAKd,KAClC,EACAe,SAAU,WACa,OAAff,KAAKD,QACLC,KAAKD,MAAQ,KACbC,KAAKC,KAAO,KACZD,KAAKY,YAEb,EACAI,QAAS,WACc,OAAfhB,KAAKD,QACLC,KAAKD,MAAQ,KACbC,KAAKC,KAAO,KACZD,KAAKY,YAEb,EACAK,QAAS,WACDjB,KAAKD,QACLC,KAAKD,MAAQ,KACbC,KAAKC,KAAO,KACZD,KAAKY,YAEb,EACAA,UAAW,WACP,MAAMM,EAAOlB,KACPJ,EAAUuB,IAAAA,OAAS,CAAC,EAAGnB,KAAKG,WAAY,CAAEiB,aAAcpB,KAAKN,OAAQ,CAACM,KAAKL,UAAWK,KAAKD,QAC3FsB,EAAUF,IAAE,IAAMnB,KAAKN,QAC7BM,KAAKE,UAAW,EAChBmB,EAAQC,IAAI,CACRC,GAAI,MACJ/B,IAAKQ,KAAKR,IACVM,KAAMF,EACN4B,OAAQ,MACRC,aAAczB,KAAKV,QAAU6B,IAAEnB,KAAKV,SAAW6B,IAAEnB,KAAK0B,KACtDC,WAAY,SAAUhB,EAAGiB,GACrBV,EAAKhB,UAAW,CACpB,GAER,G","sources":["webpack://atk/./src/vue-components/item-search.component.js"],"sourcesContent":["import $ from 'external/jquery';\r\nimport atk from 'atk';\r\n\r\n/**\r\n * Will allow user to send data query request to server.\r\n * Request should filter the data and reload the data view.\r\n * The request is send using Fomantic-UI api.\r\n *\r\n * Properties need for this component are:\r\n * context: string, a jQuery selector where the 'loading' class will be apply by Fomantic-UI - default to this component.\r\n * url:     string, the URL to call.\r\n * q:       string, the initial string for the query. Useful if this search is part of the reload.\r\n * reload:  string, an Id selector for jQuery, '#' is append automatically.\r\n */\r\nexport default {\r\n    name: 'AtkItemSearch',\r\n    template: `\r\n        <div class=\"atk-item-search\" :class=\"inputCss\">\r\n            <input\r\n                class=\"ui\"\r\n                v-model=\"query\"\r\n                type=\"text\"\r\n                name=\"atk-vue-search\"\r\n                placeholder=\"Search...\"\r\n                @keyup=\"onKeyup\"\r\n                @keyup.esc=\"onEscape\"\r\n            />\r\n            <i class=\"atk-search-icon\" :class=\"classIcon\" />\r\n            <span style=\"width: 12px; cursor: pointer;\" @click=\"onClear\" />\r\n        </div>`,\r\n    props: {\r\n        context: String,\r\n        url: String,\r\n        q: String,\r\n        reload: String,\r\n        queryArg: String,\r\n        options: Object,\r\n    },\r\n    data: function () {\r\n        return {\r\n            query: this.q,\r\n            temp: this.q,\r\n            isActive: false,\r\n            extraQuery: null,\r\n            inputCss: this.options.inputCss,\r\n        };\r\n    },\r\n    computed: {\r\n        classIcon: function () {\r\n            return {\r\n                'search icon': this.query === null || this.query === '',\r\n                'remove icon': this.query !== null,\r\n            };\r\n        },\r\n    },\r\n    methods: {\r\n        onKeyup: function () {\r\n            if (!this.onKeyup.debouncedFx) {\r\n                this.onKeyup.debouncedFx = atk.createDebouncedFx((e) => {\r\n                    this.onKeyup.debouncedFx = null;\r\n                    if (this.query !== this.temp) {\r\n                        if (this.query === '') {\r\n                            this.query = null;\r\n                        }\r\n                        this.sendQuery();\r\n                        this.temp = this.query;\r\n                    }\r\n                }, this.options.inputTimeOut);\r\n            }\r\n            this.onKeyup.debouncedFx.call(this);\r\n        },\r\n        onEscape: function () {\r\n            if (this.query !== null) {\r\n                this.query = null;\r\n                this.temp = null;\r\n                this.sendQuery();\r\n            }\r\n        },\r\n        onEnter: function () {\r\n            if (this.query !== null) {\r\n                this.query = null;\r\n                this.temp = null;\r\n                this.sendQuery();\r\n            }\r\n        },\r\n        onClear: function () {\r\n            if (this.query) {\r\n                this.query = null;\r\n                this.temp = null;\r\n                this.sendQuery();\r\n            }\r\n        },\r\n        sendQuery: function () {\r\n            const that = this;\r\n            const options = $.extend({}, this.extraQuery, { __atk_reload: this.reload, [this.queryArg]: this.query });\r\n            const $reload = $('#' + this.reload);\r\n            this.isActive = true;\r\n            $reload.api({\r\n                on: 'now',\r\n                url: this.url,\r\n                data: options,\r\n                method: 'GET',\r\n                stateContext: this.context ? $(this.context) : $(this.$el),\r\n                onComplete: function (e, r) {\r\n                    that.isActive = false;\r\n                },\r\n            });\r\n        },\r\n    },\r\n};\r\n"],"names":["name","template","props","context","String","url","q","reload","queryArg","options","Object","data","query","this","temp","isActive","extraQuery","inputCss","computed","classIcon","methods","onKeyup","debouncedFx","atk","e","sendQuery","inputTimeOut","call","onEscape","onEnter","onClear","that","$","__atk_reload","$reload","api","on","method","stateContext","$el","onComplete","r"],"sourceRoot":""}