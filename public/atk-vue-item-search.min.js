(self.webpackChunkatk=self.webpackChunkatk||[]).push([[590],{7028:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var s=n(9713),i=n.n(s),u=n(3609),r=n.n(u);const l={name:"atk-item-search",template:'<div class="atk-item-search" :class="inputCss">\n      <input class="ui" \n        v-model="query" \n        type="text" placeholder="Search..." \n        @keyup="onKeyup" \n        @keyup.esc="onEscape" \n        name="atk-vue-search"/>\n        <i class="atk-search-icon" :class="classIcon"></i><span style="width:12px;cursor:pointer" @click="onClear"></span>\n    </div>\n',props:{context:String,url:String,q:String,reload:String,queryArg:String,options:{type:Object,default:function(){return{inputTimeOut:350,inputCss:""}}}},data:function(){return{query:this.q,temp:this.q,isActive:!1,extraQuery:null,inputCss:this.options.inputCss}},computed:{classIcon:function(){return{"search icon":null===this.query||""===this.query,"remove icon":null!==this.query}}},methods:{onKeyup:function(){var t=this;atk.debounce((function(e){t.query!==t.temp&&(""===t.query&&(t.query=null),t.sendQuery(),t.temp=t.query)}),this.options.inputTimeOut).call(this)},onEscape:function(){null!==this.query&&(this.query=null,this.temp=null,this.sendQuery())},onEnter:function(){null!==this.query&&(this.query=null,this.temp=null,this.sendQuery())},onClear:function(){this.query&&(this.query=null,this.temp=null,this.sendQuery())},sendQuery:function(){var t=this,e=r().extend({},this.extraQuery,i()({__atk_reload:this.reload},this.queryArg,this.query)),n=r()("#"+this.reload);this.isActive=!0,n.api({on:"now",url:this.url,data:e,method:"GET",stateContext:this.context?r()(this.context):r()(this.$el),onComplete:function(e,n){t.isActive=!1}})}}}}}]);